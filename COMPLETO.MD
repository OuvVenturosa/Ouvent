# ğŸš€ GUIA COMPLETO DE EXECUÃ‡ÃƒO DO SISTEMA DE OUVIDORIA

## ğŸ“‹ ÃNDICE
1. [PrÃ©-requisitos](#prÃ©-requisitos)
2. [Estrutura do Projeto](#estrutura-do-projeto)
3. [InstalaÃ§Ã£o](#instalaÃ§Ã£o)
4. [ExecuÃ§Ã£o Completa do Sistema](#execuÃ§Ã£o-completa-do-sistema)
5. [ExecuÃ§Ã£o Individual dos Componentes](#execuÃ§Ã£o-individual-dos-componentes)
6. [Fechamento do Sistema](#fechamento-do-sistema)
7. [URLs de Acesso](#urls-de-acesso)
8. [Troubleshooting](#troubleshooting)
9. [Backup e RestauraÃ§Ã£o](#backup-e-restauraÃ§Ã£o)

---

## ğŸ”§ PRÃ‰-REQUISITOS

### Software NecessÃ¡rio:
- **Node.js** (versÃ£o 16 ou superior)
- **npm** (vem com Node.js)
- **Python** (versÃ£o 3.8 ou superior)
- **Nginx** (para produÃ§Ã£o)
- **Git** (para clonar o repositÃ³rio)

### Verificar InstalaÃ§Ãµes:
```bash
node --version
npm --version
python --version
nginx -v
git --version
```

---

## ğŸ“ ESTRUTURA DO PROJETO

```
CHATBOT OUV/
â”œâ”€â”€ ğŸ“ backend/                 # API REST do sistema
â”‚   â”œâ”€â”€ ğŸ“ api/                # Endpoints da API
â”‚   â”œâ”€â”€ ğŸ“ node_modules/       # DependÃªncias do backend
â”‚   â”œâ”€â”€ ouvidoria.db          # Banco de dados SQLite
â”‚   â”œâ”€â”€ backend.js            # Servidor principal
â”‚   â”œâ”€â”€ index.js              # ConfiguraÃ§Ã£o do servidor
â”‚   â””â”€â”€ package.json          # DependÃªncias do backend
â”œâ”€â”€ ğŸ“ frontend/               # Interface web React
â”‚   â”œâ”€â”€ ğŸ“ public/            # Arquivos pÃºblicos
â”‚   â”œâ”€â”€ ğŸ“ src/               # CÃ³digo fonte React
â”‚   â”œâ”€â”€ ğŸ“ build/             # Build de produÃ§Ã£o
â”‚   â””â”€â”€ package.json          # DependÃªncias do frontend
â”œâ”€â”€ ğŸ“ chatbot/                # Bot do WhatsApp
â”‚   â”œâ”€â”€ ğŸ“ src/               # CÃ³digo fonte do bot
â”‚   â”œâ”€â”€ ğŸ“ logs/              # Logs do chatbot
â”‚   â”œâ”€â”€ ğŸ“ relatorios/        # RelatÃ³rios gerados
â”‚   â””â”€â”€ package.json          # DependÃªncias do chatbot
â”œâ”€â”€ ğŸ“ config/                 # ConfiguraÃ§Ãµes do Nginx
â”‚   â”œâ”€â”€ nginx.conf            # ConfiguraÃ§Ã£o principal
â”‚   â”œâ”€â”€ mime.types            # Tipos MIME
â”‚   â”œâ”€â”€ configurar_nginx.ps1  # Script de configuraÃ§Ã£o
â”‚   â””â”€â”€ preparar_nginx.ps1    # Script de preparaÃ§Ã£o
â”œâ”€â”€ ğŸ“ scripts/                # Scripts de automaÃ§Ã£o
â”‚   â”œâ”€â”€ executar_sistema_completo_com_nginx.ps1
â”‚   â””â”€â”€ fechar_sistema_completo_com_nginx.ps1
â”œâ”€â”€ ğŸ“ docs/                   # DocumentaÃ§Ã£o
â”œâ”€â”€ ğŸ“ assets/                 # Imagens e recursos
â”œâ”€â”€ ğŸ“ anexos/                 # Arquivos anexados
â”œâ”€â”€ ğŸ“ relatorios/             # RelatÃ³rios gerais
â”œâ”€â”€ chat.js                    # Chat principal (legado)
â””â”€â”€ package.json               # DependÃªncias principais
```

---

## âš™ï¸ INSTALAÃ‡ÃƒO

### 1. Clonar o RepositÃ³rio
```bash
git clone [URL_DO_REPOSITORIO]
cd "CHATBOT OUV"
```

### 2. Instalar DependÃªncias Principais
```bash
npm install
```

### 3. Instalar DependÃªncias do Backend
```bash
cd backend
npm install
cd ..
```

### 4. Instalar DependÃªncias do Frontend
```bash
cd frontend
npm install
cd ..
```

### 5. Instalar DependÃªncias do Chatbot
```bash
cd chatbot
npm install
cd ..
```

### 6. Configurar Nginx (Opcional - para produÃ§Ã£o)
```bash
cd config
./configurar_nginx.ps1
cd ..
```

---

## ğŸš€ EXECUÃ‡ÃƒO COMPLETA DO SISTEMA

### MÃ©todo 1: Script Automatizado (Recomendado)
```bash
# Executar todo o sistema incluindo Nginx
./scripts/executar_sistema_completo_com_nginx.ps1
```

### MÃ©todo 2: ExecuÃ§Ã£o Manual
```bash
# Terminal 1 - Backend
cd backend
npm start

# Terminal 2 - Frontend
cd frontend
npm start

# Terminal 3 - Chatbot
cd chatbot
npm start
```

---

## ğŸ”§ EXECUÃ‡ÃƒO INDIVIDUAL DOS COMPONENTES

### Backend (API REST)
```bash
cd backend
npm start
# Servidor rodando em: http://localhost:3001
```

### Frontend (Interface Web)
```bash
cd frontend
npm start
# Interface rodando em: http://localhost:3000
```

### Chatbot (WhatsApp)
```bash
cd chatbot
npm start
# Bot conectado ao WhatsApp
```

### Nginx (Proxy Reverso)
```bash
cd config
./preparar_nginx.ps1
# Nginx configurado e iniciado
```

---

## ğŸ›‘ FECHAMENTO DO SISTEMA

### MÃ©todo 1: Script Automatizado
```bash
./scripts/fechar_sistema_completo_com_nginx.ps1
```

### MÃ©todo 2: Fechamento Manual
```bash
# Parar Nginx
taskkill /f /im nginx.exe

# Parar processos Node.js
taskkill /f /im node.exe

# Ou usar Ctrl+C em cada terminal
```

---

## ğŸŒ URLS DE ACESSO

### Desenvolvimento Local:
- **Frontend**: http://localhost:3000
- **Backend API**: http://localhost:3001
- **DocumentaÃ§Ã£o API**: http://localhost:3001/api

### ProduÃ§Ã£o (com Nginx):
- **Sistema Principal**: http://localhost:80
- **API**: http://localhost/api
- **Admin**: http://localhost/admin

### URLs EspecÃ­ficas:
- **Lista de Demandas**: http://localhost/demandas
- **Detalhes de Demanda**: http://localhost/demanda/[ID]
- **Editor de Respostas**: http://localhost/editor
- **EstatÃ­sticas**: http://localhost/estatisticas

---

## ğŸ” TROUBLESHOOTING

### Problemas Comuns:

#### 1. Porta jÃ¡ em uso
```bash
# Verificar processos usando as portas
netstat -ano | findstr :3000
netstat -ano | findstr :3001
netstat -ano | findstr :80

# Matar processo especÃ­fico
taskkill /PID [NUMERO_DO_PROCESSO] /F
```

#### 2. Erro de dependÃªncias
```bash
# Limpar cache do npm
npm cache clean --force

# Remover node_modules e reinstalar
rm -rf node_modules
npm install
```

#### 3. Erro de banco de dados
```bash
# Verificar se o banco existe
ls backend/ouvidoria.db

# Se nÃ£o existir, criar
cd backend
node initDatabase.js
```

#### 4. Erro do Nginx
```bash
# Verificar configuraÃ§Ã£o
nginx -t

# Reiniciar Nginx
nginx -s reload
```

#### 5. Chatbot nÃ£o conecta
```bash
# Verificar logs
cd chatbot/logs
tail -f chatbot.log

# Verificar QR Code
cat last_qrcode.txt
```

### Logs Importantes:
- **Backend**: `backend/logs/`
- **Frontend**: Console do navegador
- **Chatbot**: `chatbot/logs/`
- **Nginx**: `/var/log/nginx/` (Linux) ou logs do Windows

---

## ğŸ’¾ BACKUP E RESTAURAÃ‡ÃƒO

### Backup do Banco de Dados
```bash
# Backup automÃ¡tico
cp backend/ouvidoria.db backup/ouvidoria_$(date +%Y%m%d_%H%M%S).db

# Backup manual
cp backend/ouvidoria.db backup/ouvidoria_backup.db
```

### RestauraÃ§Ã£o do Banco
```bash
# Parar o sistema
./scripts/fechar_sistema_completo_com_nginx.ps1

# Restaurar backup
cp backup/ouvidoria_backup.db backend/ouvidoria.db

# Reiniciar sistema
./scripts/executar_sistema_completo_com_nginx.ps1
```

### Backup Completo do Sistema
```bash
# Criar backup completo
tar -czf backup_sistema_$(date +%Y%m%d_%H%M%S).tar.gz \
  --exclude=node_modules \
  --exclude=.git \
  --exclude=logs \
  .
```

---

## ğŸ“Š MONITORAMENTO

### Verificar Status dos ServiÃ§os
```bash
# Verificar processos Node.js
tasklist | findstr node

# Verificar porta do Nginx
netstat -ano | findstr :80

# Verificar uso de memÃ³ria
wmic process where name="node.exe" get ProcessId,WorkingSetSize
```

### MÃ©tricas Importantes:
- **CPU**: Monitorar uso do Node.js
- **MemÃ³ria**: Verificar vazamentos
- **Disco**: EspaÃ§o para logs e anexos
- **Rede**: LatÃªncia das APIs

---

## ğŸ” SEGURANÃ‡A

### ConfiguraÃ§Ãµes Recomendadas:
1. **Firewall**: Bloquear portas desnecessÃ¡rias
2. **HTTPS**: Configurar SSL/TLS em produÃ§Ã£o
3. **AutenticaÃ§Ã£o**: Implementar login seguro
4. **Backup**: Backup regular do banco de dados
5. **Logs**: Monitorar logs de acesso

### VariÃ¡veis de Ambiente:
```bash
# Criar arquivo .env no backend
NODE_ENV=production
PORT=3001
DB_PATH=./ouvidoria.db
JWT_SECRET=sua_chave_secreta_aqui
```

---

## ğŸ“ SUPORTE

### InformaÃ§Ãµes de Contato:
- **Desenvolvedor**: [SEU_NOME]
- **Email**: [SEU_EMAIL]
- **Telefone**: [SEU_TELEFONE]

### DocumentaÃ§Ã£o Adicional:
- **README.md**: DocumentaÃ§Ã£o geral
- **MANUAL.MD**: Manual detalhado
- **docs/**: DocumentaÃ§Ã£o especÃ­fica

---

## ğŸ¯ COMANDOS RÃPIDOS

### Iniciar Sistema Completo:
```bash
./scripts/executar_sistema_completo_com_nginx.ps1
```

### Parar Sistema Completo:
```bash
./scripts/fechar_sistema_completo_com_nginx.ps1
```

### Verificar Status:
```bash
netstat -ano | findstr :3000
netstat -ano | findstr :3001
netstat -ano | findstr :80
```

### Reiniciar ServiÃ§o EspecÃ­fico:
```bash
# Backend
cd backend && npm start

# Frontend
cd frontend && npm start

# Chatbot
cd chatbot && npm start
```

---

## ğŸ“ NOTAS IMPORTANTES

1. **Sempre execute os scripts como administrador** no Windows
2. **Mantenha o sistema atualizado** regularmente
3. **FaÃ§a backup regular** do banco de dados
4. **Monitore os logs** para identificar problemas
5. **Teste em ambiente de desenvolvimento** antes de produÃ§Ã£o
6. **Mantenha as dependÃªncias atualizadas**
7. **Documente mudanÃ§as** no sistema

---

## âœ… CHECKLIST DE VERIFICAÃ‡ÃƒO

- [ ] Node.js instalado e funcionando
- [ ] npm instalado e funcionando
- [ ] Python instalado e funcionando
- [ ] Nginx instalado (se necessÃ¡rio)
- [ ] DependÃªncias instaladas
- [ ] Banco de dados criado
- [ ] ConfiguraÃ§Ãµes do Nginx aplicadas
- [ ] Portas disponÃ­veis (3000, 3001, 80)
- [ ] Firewall configurado
- [ ] Backup inicial realizado
- [ ] Logs configurados
- [ ] Sistema testado

---

**ğŸ‰ Sistema pronto para uso!**

Para dÃºvidas ou problemas, consulte a documentaÃ§Ã£o em `docs/` ou entre em contato com o suporte.
